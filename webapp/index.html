<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAP UI5 Demo App</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body class="sapUiBody sapUiSizeCompact" id="content">
    <div id="loading-message" style="padding: 20px; font-family: Arial; text-align: center;">
        <h2>Loading Application...</h2>
        <p id="status">Trying OpenUI5 CDN...</p>
    </div>
    
    <div
        data-sap-ui-component
        data-name="firstapp.project1"
        data-id="container"
        data-settings='{"id" : "firstapp.project1"}'
        data-handle-validation="true"
        style="display: none;"
    ></div>

    <script>
        console.log('=== Trying OpenUI5 CDN ===');
        
        var statusEl = document.getElementById('status');
        
        function updateStatus(msg) {
            console.log(msg);
            if (statusEl) statusEl.textContent = msg;
        }
        
        // Try OpenUI5 from sdk.openui5.org
        updateStatus('Loading from OpenUI5 CDN...');
        
        var script = document.createElement('script');
        script.id = 'sap-ui-bootstrap';
        script.src = 'https://sdk.openui5.org/1.108.1/resources/sap-ui-core.js';
        script.setAttribute('data-sap-ui-theme', 'sap_horizon');
        script.setAttribute('data-sap-ui-resource-roots', '{"firstapp.project1": "./"}');
        script.setAttribute('data-sap-ui-libs', 'sap.m,sap.tnt,sap.ui.layout');
        script.setAttribute('data-sap-ui-on-init', 'module:sap/ui/core/ComponentSupport');
        script.setAttribute('data-sap-ui-compat-version', 'edge');
        script.setAttribute('data-sap-ui-async', 'true');
        script.setAttribute('data-sap-ui-frame-options', 'trusted');
        script.setAttribute('data-sap-ui-preload', 'async');
        
        script.onload = function() {
            updateStatus('✅ UI5 loaded! Initializing...');
            console.log('✅ OpenUI5 loaded successfully from sdk.openui5.org');
            
            setTimeout(function() {
                var loadingMsg = document.getElementById('loading-message');
                var container = document.querySelector('[data-sap-ui-component]');
                
                if (loadingMsg) loadingMsg.style.display = 'none';
                if (container) container.style.display = 'block';
                
                if (typeof sap !== 'undefined') {
                    console.log('✅ SAP namespace available');
                    console.log('✅ Your app should now be visible!');
                }
            }, 2000);
        };
        
        script.onerror = function(e) {
            updateStatus('❌ OpenUI5 CDN also failed');
            console.error('❌ OpenUI5 CDN failed too');
            console.error('Trying alternative CDN...');
            
            // Try alternative: CDNjs
            var script2 = document.createElement('script');
            script2.src = 'https://sapui5.hana.ondemand.com/resources/sap-ui-core.js';
            script2.setAttribute('data-sap-ui-theme', 'sap_horizon');
            script2.setAttribute('data-sap-ui-resource-roots', '{"firstapp.project1": "./"}');
            script2.setAttribute('data-sap-ui-libs', 'sap.m,sap.tnt,sap.ui.layout');
            script2.setAttribute('data-sap-ui-on-init', 'module:sap/ui/core/ComponentSupport');
            script2.setAttribute('data-sap-ui-async', 'true');
            
            script2.onload = function() {
                updateStatus('✅ Alternative CDN worked!');
                console.log('✅ Loaded from alternative CDN');
                var loadingMsg = document.getElementById('loading-message');
                var container = document.querySelector('[data-sap-ui-component]');
                if (loadingMsg) loadingMsg.style.display = 'none';
                if (container) container.style.display = 'block';
            };
            
            script2.onerror = function() {
                updateStatus('❌ All CDNs blocked - Need to self-host UI5');
                console.error('❌ All CDN options failed');
                console.error('SOLUTION: You need to self-host UI5 libraries');
            };
            document.head.appendChild(script2);
        };
        
        document.head.appendChild(script);
    </script>
</body>
</html>
